<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
    <style>
        .pixel{
            border: solid black 1px;
            display: table-row;
            float: left;
            height: 40px;
            width: 40px;
        }

        .color{
            border: solid black 1px;
            float: left;
            height: 39px;
            width: 39px;
        }

        #pixel-board{
            display: table;
            left:0
        }
        
        #black{
            background-color: black;
        }

        #red{
            background-color: red;
        }

        #blue{
            background-color: blue;
        }

        #green{
            background-color: green;
        }

        .main{
            position:relative;
        }

        #color-palette{
            display:table;
        }
        
    </style>
</head>
<body>
    <h1 id = "title">Paleta de Cores</h1>
    <div id = "color-palette">
        <div class = "color selected" id = "black"></div>
        <div class = "color" id = "red"></div>
        <div class = "color" id = "blue"></div>
        <div class = "color" id = "green"></div>
    </div>
    <div id = "pixel-board"></div>
    <button id = "clear-board">Clear</button>
    <form id="size-form">
        <label for="size">Tamanho do quadro:</label>
        <input type="number" id="board-size" name="size" min="5" max="50">
        <input type="submit" id="generate-board">
    </form>

<script>
    let clear = document.getElementById("clear-board")
    let board = document.getElementById("pixel-board")
    let palete = document.getElementsByClassName("color")
    let generateBoard = document.getElementById("size-form")

    generateBoard.addEventListener("submit", getSize)

    clear.addEventListener("click", function(){
        pixels = document.getElementsByClassName("pixel");
        for(pixel of pixels){
            pixel.style.backgroundColor="";
        }

    })
    function getSize(e){
        e.preventDefault();
        let size = document.getElementById("board-size").value
        createTable(size, size);
    }
    function eventToPalete(){
        for (colors of palete){
            colors.addEventListener("click", colorPallete)
        }
    }
    function createTable(i=5, j=5){
        for (let m = 0; m < i; m+=1){
            for (let n = 0; n < j; n+=1){
                let pixel = document.createElement("div")
                pixel.className = "pixel"
                pixel.addEventListener("click", colorPallete)
                board.appendChild(pixel);
            }
            board.appendChild(document.createElement("br"))
        }
    }
    function colorPallete(e){
        if (e.target.className == "color"){
            getColor(e);
        } else if(e.target.className == "pixel"){
            printPixel(e);
        }
    }
    function getColor(event){
        removeSelected();
        event.target.classList.add("selected");
    }
    function printPixel(event){
        let colorSelected = document.getElementsByClassName('color selected')[0];
        console.log(colorSelected.id)
        event.target.style.backgroundColor = colorSelected.id
    }
    function removeSelected(){
        for (colors of palete){
            colors.classList.remove("selected")
        }
    }
    createTable();
    eventToPalete();
</script>
</body>
</html>
